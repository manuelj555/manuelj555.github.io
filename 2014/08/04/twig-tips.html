<!DOCTYPE html>
<html>
<head>   
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>PHP + Symfony Tips - Tips al Usar Twig</title>
    <meta name="description" content="" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" type="text/css" href="/assets/css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="/assets/css/screen.css" />
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Noto+Serif:400,700,400italic|Open+Sans:700,400" />
    <!-- This is for syntax highlight -->
    <link rel="stylesheet" type="text/css" href="/assets/css/syntax.css">
    <!-- Customisation  -->
    <link rel="stylesheet" type="text/css" href="/assets/css/main.css" />

</head>
<body class="home-template">

    <main class="content" role="main">

    <article class="post">
        <header class="post-header">
            <a id="blog-logo" href="http://manuelj555.github.io/">
                
                <span class="blog-title">PHP + Symfony Tips</span>
                 
            </a>
        </header>

        <span class="post-meta">
            <time datetime="2014-08-04">04 Aug 2014</time>
            
            on
            
            
       	</span>

        <h1 class="post-title">Tips al Usar Twig</h1>

        <section class="post-content">
            <p>Twig es una libreria de templates para php, que es muy utilizada en la actualidad, el framework Symfony lo utiliza por defecto para la parte de las vistas, y yo personalmente lo uso en todos los proyectos php que construyo.</p>

<p>El siguiente post es una recomendación personal y una serie de consejos que podemos seguir al utilizar esta libreria, y pretendo explicar más o menos lo que generalmente hago a la hora de trabajar las vistas y algunos diseños con twig.</p>

<p>Lo principal es usar todo el potencial de twig, ya que este no es solo extender templates, twig ofrece otras caracteristicas como macros y embed, que son super potentes y nos pueden ayudar muchisimo a mejorar nuestro rendimiento al desarrollar aplicaciones.</p>

<p>A continuación mostraré algunas de las cosas que he implementado para reutilizar diseños y facilitar el manejo de algunas partes de mis vistas twig:</p>

<h2>Macros</h2>

<p>Las <a href="http://twig.sensiolabs.org/doc/tags/macro.html">macros</a> nos permiten definir &quot;funciones&quot; twig en las mismas vistas, y son utiles para crear bloques de código que son muy utilizados en la aplicación.</p>

<p>Un caso donde los he venido usando es al crear links como botones e inputs de tipo submit, button o reset, ya que uso muy a menudo el <a href="http://getbootstrap.com/">bootstrap de twitter</a>, acostumbro definir un archivo de macros, para estos botones, ejemplo:</p>

<p>Tenemos el siguiente archivo twig (<strong>views/macros/buttons.html.twig</strong>):</p>

<figure class="highlight"><pre><code class="language-jinja" data-lang="jinja"><span class="lineno"> 1</span> <span class="c">{# Los &quot;-&quot; guiones que se ven entre las definicones de etiquetas {%- y -%} son para quitar espacios en blanco y minimizar el código generado #}</span><span class="x"></span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="c">{# Macros para botones de formulario #}</span><span class="x"></span>
<span class="lineno"> 4</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">button</span><span class="o">(</span><span class="nv">text</span><span class="o">,</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="nv">null</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 5</span> <span class="x">&lt;button type=&quot;button&quot; class=&quot;btn btn-</span><span class="cp">{{</span> <span class="nv">type</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;default&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span>
<span class="lineno"> 6</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">icon</span> <span class="cp">%}</span><span class="x">&lt;i class=&quot;glyphicon glyphicon-</span><span class="cp">{{</span> <span class="nv">icon</span> <span class="cp">}}</span><span class="x">&quot;&gt;&lt;/i&gt; </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{{</span> <span class="nv">text</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno"> 7</span> <span class="x">&lt;/button&gt;</span>
<span class="lineno"> 8</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 9</span> 
<span class="lineno">10</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">submit</span><span class="o">(</span><span class="nv">text</span> <span class="o">=</span> <span class="s1">&#39;Guardar&#39;</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="s1">&#39;save&#39;</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">11</span> <span class="x">&lt;button type=&quot;submit&quot; class=&quot;btn btn-</span><span class="cp">{{</span> <span class="nv">type</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;default&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span>
<span class="lineno">12</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">icon</span> <span class="cp">%}</span><span class="x">&lt;i class=&quot;glyphicon glyphicon-</span><span class="cp">{{</span> <span class="nv">icon</span> <span class="cp">}}</span><span class="x">&quot;&gt;&lt;/i&gt; </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{{</span> <span class="nv">text</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">13</span> <span class="x">&lt;/button&gt;</span>
<span class="lineno">14</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">15</span> 
<span class="lineno">16</span> <span class="c">{# Macros para links con estilos de boton #}</span><span class="x"></span>
<span class="lineno">17</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="nv">type</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="nv">null</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">18</span> <span class="x">&lt;a href=&quot;</span><span class="cp">{{</span> <span class="nv">url</span> <span class="cp">}}</span><span class="x">&quot; class=&quot;btn btn-</span><span class="cp">{{</span> <span class="nv">type</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;default&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"> </span><span class="cp">{{</span> <span class="nv">class</span> <span class="cp">}}</span><span class="x">&quot; </span><span class="cp">{{</span> <span class="nv">htmlAttributes</span> <span class="cp">}}</span><span class="x">&gt;</span>
<span class="lineno">19</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="nv">icon</span> <span class="cp">%}</span><span class="x">&lt;i class=&quot;glyphicon glyphicon-</span><span class="cp">{{</span> <span class="nv">icon</span> <span class="cp">}}</span><span class="x">&quot;&gt;&lt;/i&gt; </span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}{{</span> <span class="nv">text</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">20</span> <span class="x">&lt;/a&gt;</span>
<span class="lineno">21</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">22</span> 
<span class="lineno">23</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">primaryLink</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="nv">null</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">24</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">links</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">25</span> <span class="cp">{{</span> <span class="nv">links.link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="s1">&#39;primary&#39;</span><span class="o">,</span> <span class="nv">icon</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">26</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">27</span> 
<span class="lineno">28</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">successLink</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="nv">null</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">29</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">links</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">30</span> <span class="cp">{{</span> <span class="nv">links.link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="s1">&#39;success&#39;</span><span class="o">,</span> <span class="nv">icon</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">31</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">32</span> 
<span class="lineno">33</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">infoLink</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="nv">null</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">34</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">links</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">35</span> <span class="cp">{{</span> <span class="nv">links.link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="s1">&#39;info&#39;</span><span class="o">,</span> <span class="nv">icon</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">36</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">37</span> 
<span class="lineno">38</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">warningLink</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="nv">null</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">39</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">links</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">40</span> <span class="cp">{{</span> <span class="nv">links.link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="s1">&#39;warning&#39;</span><span class="o">,</span> <span class="nv">icon</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">41</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">42</span> 
<span class="lineno">43</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">dangerLink</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="nv">null</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">44</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">links</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">45</span> <span class="cp">{{</span> <span class="nv">links.link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="s1">&#39;danger&#39;</span><span class="o">,</span> <span class="nv">icon</span><span class="o">,</span> <span class="nv">class</span><span class="o">,</span> <span class="nv">htmlAttributes</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">46</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">47</span> 
<span class="lineno">48</span> <span class="c">{# Macros para botones de operaciones CRUD #}</span><span class="x"></span>
<span class="lineno">49</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">back</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span> <span class="o">=</span> <span class="s1">&#39;Atras&#39;</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="s1">&#39;undo&#39;</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">50</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">links</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">51</span> <span class="cp">{{</span> <span class="nv">links.link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="s1">&#39;default&#39;</span><span class="o">,</span> <span class="nv">icon</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">52</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">53</span> 
<span class="lineno">54</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">edit</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span> <span class="o">=</span> <span class="s1">&#39;Editar&#39;</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="s1">&#39;edit&#39;</span><span class="o">,</span> <span class="nv">size</span> <span class="o">=</span> <span class="s1">&#39;xs&#39;</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">55</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">links</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">56</span> <span class="cp">{{</span> <span class="nv">links.link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="s1">&#39;link btn-&#39;</span><span class="o">~</span><span class="nv">size</span><span class="o">,</span> <span class="nv">icon</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">57</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">58</span> 
<span class="lineno">59</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">add</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">,</span> <span class="nv">icon</span> <span class="o">=</span> <span class="s1">&#39;plus&#39;</span><span class="o">,</span> <span class="nv">size</span> <span class="o">=</span> <span class="nv">null</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">60</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">links</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">61</span> <span class="cp">{{</span> <span class="nv">links.link</span><span class="o">(</span><span class="nv">url</span><span class="o">,</span> <span class="nv">text</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;Nuevo&#39;</span><span class="o">),</span> <span class="s1">&#39;primary btn-&#39;</span><span class="o">~</span><span class="nv">size</span><span class="o">,</span> <span class="nv">icon</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">62</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">63</span> 
<span class="lineno">64</span> <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">save</span><span class="o">(</span><span class="nv">text</span><span class="o">)</span> -<span class="cp">%}</span><span class="x"></span>
<span class="lineno">65</span> <span class="cp">{%</span> <span class="k">import</span> <span class="p">_</span><span class="nv">self</span> <span class="k">as</span> <span class="nv">btn</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">66</span> <span class="cp">{{</span> <span class="nv">btn.submit</span><span class="o">(</span><span class="nv">text</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;Guardar&#39;</span><span class="o">))</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">67</span> <span class="cp">{%</span>- <span class="k">endmacro</span> -<span class="cp">%}</span><span class="x"></span></code></pre></figure>

<p>Ahora los utilizamos en nuestras otras vistas:</p>

<figure class="highlight"><pre><code class="language-jinja" data-lang="jinja"><span class="lineno"> 1</span> <span class="cp">{%</span> <span class="k">import</span> <span class="s1">&#39;macros/buttons.html.twig&#39;</span> <span class="k">as</span> <span class="nv">btn</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="cp">{{</span> <span class="nv">btn.link</span><span class="o">(</span><span class="s1">&#39;/url&#39;</span><span class="o">,</span> <span class="s1">&#39;Home&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="cp">{{</span> <span class="nv">btn.submit</span><span class="o">()</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno"> 6</span> <span class="cp">{{</span> <span class="nv">btn.back</span><span class="o">()</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span> <span class="cp">{{</span> <span class="nv">btn.button</span><span class="o">(</span><span class="s1">&#39;Texto del boton&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno"> 9</span> 
<span class="lineno">10</span> <span class="cp">{{</span> <span class="nv">btn.primaryLink</span><span class="o">(</span><span class="s1">&#39;/url&#39;</span><span class="o">,</span> <span class="s1">&#39;Agregar Producto&#39;</span><span class="o">,</span> <span class="s1">&#39;tags&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span></code></pre></figure>

<p>La ventaja de usar las macros en ves de escribir el código directamente en cada vista, es que codificamos menos, y si el día de mañana queremos cambiar por ejemplo el color del botón de submit, solo lo modificamos una vez en nuestra macro, y todas las demás vistas tendran el cambio sin hacer nada.</p>

<p>Ahora veremos un ejemplo del uso de la etiqueta <a href="http://twig.sensiolabs.org/doc/tags/embed.html">embed</a> de twig:</p>

<h2>Embed</h2>

<p>Esta etiqueta permite redefinir los bloques de un template incluido en nuestra vista, es decir, es una combinacion de las funcionalidades ofrecidas por la función include y el tag extends.</p>

<p>Un caso donde he utilizado esta etiqueta es a la hora de usar el <a href="http://getbootstrap.com/components/#panels">panel del bootstrap de twitter</a>; la idea es definir un template que tenga el código html necesario para el panel y crear los bloques que serán luego redefinidos en las vistas que quieran incorporar el panel.</p>

<p>Acá el código que en principio he implementado (<strong>views/panel.html.twig</strong>):</p>

<figure class="highlight"><pre><code class="language-jinja" data-lang="jinja"><span class="lineno">1</span> <span class="x">&lt;div class=&quot;panel panel-</span><span class="cp">{{</span> <span class="nv">type</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;default&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span>
<span class="lineno">2</span> 
<span class="lineno">3</span> <span class="x">    &lt;div class=&quot;panel-heading&quot;&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">header</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x">&lt;/div&gt;</span>
<span class="lineno">4</span> 
<span class="lineno">5</span> <span class="x">    &lt;div class=&quot;panel-body&quot;&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x">&lt;/div&gt;</span>
<span class="lineno">6</span> 
<span class="lineno">7</span> <span class="x">    &lt;div class=&quot;panel-footer&quot;&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">footer</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x">&lt;/div&gt;</span>
<span class="lineno">8</span> 
<span class="lineno">9</span> <span class="x">&lt;/div&gt;</span></code></pre></figure>

<p>Ahora en cualquier vista twig podemos embeber el template que contiene el panel, y llenar los bloques con información:</p>

<figure class="highlight"><pre><code class="language-jinja" data-lang="jinja"><span class="lineno"> 1</span> <span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;base.html.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="cp">{%</span> <span class="k">block</span> <span class="nv">page_title</span> <span class="cp">%}</span><span class="x">Page title</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span> <span class="x">    &lt;p&gt;Page content!!!&lt;/p&gt;</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">embed</span> <span class="s1">&#39;panel.html.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">10</span> <span class="x">        </span><span class="c">{# este import debe ir dentro del embed para que esté disponible en los bloques #}</span><span class="x"></span>
<span class="lineno">11</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">import</span> <span class="s1">&#39;macros/buttons.html.twig&#39;</span> <span class="k">as</span> <span class="nv">btn</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">12</span> 
<span class="lineno">13</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">header</span> <span class="cp">%}</span><span class="x">Título del Panel</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">14</span> 
<span class="lineno">15</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span><span class="x">Contenido del Panel</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">16</span> 
<span class="lineno">17</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">footer</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">18</span> <span class="x">            </span><span class="cp">{{</span> <span class="nv">btn.submit</span><span class="o">()</span> <span class="cp">}}</span><span class="x"> </span><span class="cp">{{</span> <span class="nv">btn.back</span><span class="o">()</span> <span class="cp">}}</span><span class="x"></span>
<span class="lineno">19</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">20</span> 
<span class="lineno">21</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">endembed</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">22</span> 
<span class="lineno">23</span> <span class="x">    Una vista puede tener tantos embed como se quiera.</span>
<span class="lineno">24</span> 
<span class="lineno">25</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">embed</span> <span class="s1">&#39;panel.html.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">26</span> <span class="x">        </span><span class="c">{# este embed no tiene footer #}</span><span class="x"></span>
<span class="lineno">27</span> 
<span class="lineno">28</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">header</span> <span class="cp">%}</span><span class="x">Título del Panel</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">29</span> 
<span class="lineno">30</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span><span class="x">Contenido del Panel</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">31</span> 
<span class="lineno">32</span> <span class="x">        </span><span class="c">{# No definimos el bloque footer, ya que no lo necesitamos en este caso #}</span><span class="x"></span>
<span class="lineno">33</span> 
<span class="lineno">34</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">endembed</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">35</span> 
<span class="lineno">36</span> <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span></code></pre></figure>

<p>Como ven, esta etiqueta nos da un gran potencial a la hora de escribir código repetitivo, sin embargo este template en particular aun tiene un problema, y es que si no definimos algún bloque (ya sea porque no lo necesitamos), igual se genera el div sin contenido y se verá en el diseño gracias a que contiene un padding.</p>

<p>Para solventar esto, el panel que he implementado es uno donde todos los bloques (header, body y footer) son opcionales:</p>

<figure class="highlight"><pre><code class="language-jinja" data-lang="jinja"><span class="lineno"> 1</span> <span class="c">{# views/panel.html.twig #}</span><span class="x"></span>
<span class="lineno"> 2</span> <span class="cp">{%</span> <span class="k">set</span> <span class="p">_</span><span class="nv">header</span>  <span class="o">=</span>  <span class="nb">block</span><span class="o">(</span><span class="s1">&#39;header&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 3</span> <span class="cp">{%</span> <span class="k">set</span> <span class="p">_</span><span class="nv">body</span>    <span class="o">=</span>  <span class="nb">block</span><span class="o">(</span><span class="s1">&#39;body&#39;</span><span class="o">)</span>   <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 4</span> <span class="cp">{%</span> <span class="k">set</span> <span class="p">_</span><span class="nv">footer</span>  <span class="o">=</span>  <span class="nb">block</span><span class="o">(</span><span class="s1">&#39;footer&#39;</span><span class="o">)</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span> <span class="x">&lt;div class=&quot;panel panel-</span><span class="cp">{{</span> <span class="nv">type</span><span class="o">|</span><span class="nf">default</span><span class="o">(</span><span class="s1">&#39;default&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x">&quot;&gt;</span>
<span class="lineno"> 7</span> 
<span class="lineno"> 8</span> <span class="x">    </span><span class="c">{# </span>
<span class="lineno"> 9</span> <span class="c">        La idea acá es que ningun bloque sea obligatorio</span>
<span class="lineno">10</span> <span class="c">        Si alguno está vacio o no definido, </span>
<span class="lineno">11</span> <span class="c">        simplemente no se cumple la condición y no se imprime el div</span>
<span class="lineno">12</span> <span class="c">     #}</span><span class="x"></span>
<span class="lineno">13</span> 
<span class="lineno">14</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="p">_</span><span class="nv">header</span> <span class="k">is</span> <span class="k">not</span> <span class="nf">empty</span> <span class="cp">%}</span><span class="x">&lt;div class=&quot;panel-heading&quot;&gt;</span><span class="cp">{{</span> <span class="err">_</span><span class="nv">header</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x">&lt;/div&gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">15</span> 
<span class="lineno">16</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="p">_</span><span class="nv">body</span> <span class="k">is</span> <span class="k">not</span> <span class="nf">empty</span> <span class="cp">%}</span><span class="x">&lt;div class=&quot;panel-body&quot;&gt;</span><span class="cp">{{</span> <span class="err">_</span><span class="nv">body</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x">&lt;/div&gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">17</span> 
<span class="lineno">18</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">if</span> <span class="p">_</span><span class="nv">footer</span> <span class="k">is</span> <span class="k">not</span> <span class="nf">empty</span> <span class="cp">%}</span><span class="x">&lt;div class=&quot;panel-footer&quot;&gt;</span><span class="cp">{{</span> <span class="err">_</span><span class="nv">footer</span><span class="o">|</span><span class="nf">raw</span> <span class="cp">}}</span><span class="x">&lt;/div&gt;</span><span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">19</span> 
<span class="lineno">20</span> <span class="x">&lt;/div&gt;</span></code></pre></figure>

<p>La ventaja de usar embed, es que si por alguna razón debemos cambiar o ajustar el código html para el panel, añadiendo divs, clases, etc, con hacerlo en la vista <strong>panel.html.twig</strong> el cambio se verá reflejado en todas las vistas que hayan embebido el panel.
<br>
<br>
<br>
Esta es una pequeña muestra de lo que podemos hacer para mejorar el rendimiento y mantenimiento al programar nuestras vistas, queda de tu parte idear otros posibles usos para las macros y la etiqueta embed.</p>

<h2>Otros tips al usar Twig sin un Framework</h2>

<p>Cuando eres tú el encargado de crear la instancia de twig, y definir los directorios de las vistas, es recomendable usar los <a href="http://twig.sensiolabs.org/doc/api.html#loaders">Namespaces del Loader</a>, ya que esto ayuda a mantener organizados los archivos de las vistas.</p>

<p>Una posible organización puede ser:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">views
  |
  |------_shared
  |         |
  |         |----templates
  |         |       |----base.twig
  |         |----partials
  |         |       |----menu.twig
  |         |       |----panel.twig
  |         |----macros
  |         |       |----buttons.twig
  |
  |------home.twig
  |------edit-user.twig
  |------user
          |----list.twig
          |----create.twig
          |----edit.twig
</code></pre></div>
<p>Para lograrlo, nuestro loader deberá estar más o menos así:</p>

<figure class="highlight"><pre><code class="language-php" data-lang="php"><span class="lineno">1</span> <span class="cp">&lt;?php</span>
<span class="lineno">2</span> 
<span class="lineno">3</span> <span class="nv">$loader</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Twig_Loader_Filesystem</span><span class="p">();</span>
<span class="lineno">4</span> 
<span class="lineno">5</span> <span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">addPath</span><span class="p">(</span><span class="s1">&#39;/path_to_views&#39;</span><span class="p">);</span>
<span class="lineno">6</span> <span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">addPath</span><span class="p">(</span><span class="s1">&#39;/path_to_views/_shared/templates&#39;</span><span class="p">,</span> <span class="s1">&#39;templates&#39;</span><span class="p">);</span>
<span class="lineno">7</span> <span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">addPath</span><span class="p">(</span><span class="s1">&#39;path_to_views/_views/_shared/partials&#39;</span><span class="p">,</span> <span class="s1">&#39;partials&#39;</span><span class="p">);</span>
<span class="lineno">8</span> <span class="nv">$loader</span><span class="o">-&gt;</span><span class="na">addPath</span><span class="p">(</span><span class="s1">&#39;path_to_views/_views/_shared/macros&#39;</span><span class="p">,</span> <span class="s1">&#39;macros&#39;</span><span class="p">);</span></code></pre></figure>

<p>Con esto conseguimos tener varios directorios a los que hacer referencia a la hora de incluir o extender templates, por ejemplo:</p>

<figure class="highlight"><pre><code class="language-jinja" data-lang="jinja"><span class="lineno"> 1</span> <span class="cp">{%</span> <span class="k">extends</span> <span class="s1">&#39;@templates/base.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span> <span class="cp">{%</span> <span class="k">import</span> <span class="s1">&#39;@macros/buttons.twig&#39;</span> <span class="k">as</span> <span class="nv">btn</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 4</span> 
<span class="lineno"> 5</span> <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 6</span> 
<span class="lineno"> 7</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">embed</span> <span class="s1">&#39;@partials/panel.twig&#39;</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">header</span> <span class="cp">%}</span><span class="x">Título del Panel</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">10</span> 
<span class="lineno">11</span> <span class="x">        </span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">body</span> <span class="cp">%}</span><span class="x">Contenido del Panel</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">12</span> <span class="x">    </span><span class="cp">{%</span> <span class="k">endembed</span> <span class="cp">%}</span><span class="x"></span>
<span class="lineno">13</span> 
<span class="lineno">14</span> <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span></code></pre></figure>

<p>Esto nos da la ventaja de tener los templates más organizados y nos da la flexibilidad de que si luego cambiamos el directorio de los templates, partials o macros, mientras mantengan el mismo namespace no se dañaran nuestras vistas.</p>

        </section>

        

        <footer class="post-footer">
            
            <section class="author">
                <header> <a href="http://manuelj555.github.io/"> <img class="profile" src="/assets/images/profile.png" alt="Author's profile picture"></a></header>
                <article>
                    <h4> Manuel Aguirre <programador.manuel@gmail.com> </h4>
                    <p> 
                        Desarrollador Web, (PHP, HTML, css, javascript).<br/>
                        Intento usar Symfony2 y/o sus componentes en mis proyectos.<br/>
                        Apasionado por el aprendizaje y loco por la Programación :-)
                    </p>
                </article>
            </section>                
            

            <section class="share">
                <h4>Comparte</h4>
                <a class="icon-twitter" href="http://twitter.com/share?text=Tips al Usar Twig&amp;url=/2014/08/04/twig-tips.html"
                   onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');
                           return false;">
                    <span class="hidden">Twitter</span>
                </a>
                <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=/2014/08/04/twig-tips.html"
                   onclick="window.open(this.href, 'facebook-share', 'width=580,height=296');
                           return false;">
                    <span class="hidden">Facebook</span>
                </a>
                <a class="icon-google-plus" href="https://plus.google.com/share?url=/2014/08/04/twig-tips.html"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');
                           return false;">
                    <span class="hidden">Google+</span>
                </a>
            </section>

            
            <section class="disqus">
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'phpsymfonytipsmanuelj555'; // required: replace example with your forum shortname

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script');
                        dsq.type = 'text/javascript';
                        dsq.async = true;
                        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            </section>
            

        </footer>

    </article>

</main>


    <script type="text/javascript" src="/assets/js/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="/assets/js/index.js"></script>

    <!-- Google Analytics Tracking code -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-59688229-1', 'auto');
        ga('send', 'pageview');

    </script>
</body>
</html>
